---
title: "STAT_306_Project_Group_10"
format: pdf
editor: visual
---

# STAT 306 Project

## Nicholas Tam, Ivy Cheung, Kaichi Nakajima, Kevin Liu (Group 10)

## Introduction

Breast invasive ductal carcinoma (IDC) is the most common type of breast cancer, with about 80% of all forms of breast cancer being IDC, according to the American Cancer Society (DePolo, 2024). There are numerous nonsurgical treatments of IDC, such as radiotherapy, chemotherapy, and hormone therapy (Wright, 2023), but it is unclear how combinations of treatments can interact in a model to predict a patient’s survival until death.

For our research project, we have selected a dataset of approximately 1900 primary breast cancer samples, obtained from the Molecular Taxonomy of Breast Cancer International Consortium (METABRIC) database through cBioPortal for Cancer Genomics.

Our project question is:

**"How do radiotherapy, chemotherapy, and hormone therapy influence the length of time a patient with IDC will survive until death, given control variables age, surgery type, and tumor stage?"**

Our analysis will involve the inference of covariates within linear models, and thus \_\_\_

-   Variables from columns 32 to 693 consist of genetic attributes containing m-RNA levels z-score for 331 genes, and mutation for 175 genes; they have been omitted due to being difficult to interpret.

## Analysis

### Loading relevant libraries

```{r}
library(dplyr)
library(tidyverse)
library(ggplot2)
# install.packages("fastDummies")
library(fastDummies)
# install.packages('stringi')
```

```{r}

```

### Uploading relevant table and narrowing down to data of interest

-   Due to the distribution of “cancer_type_detailed” categories and for ease of computation, we will be filtering the dataset for deceased IDC patients only, as IDC consists of the majority of the dataset, and the “overall_survival” column for living patients would be inconsistent for living patients due to time.

-   “tumor_size” has been removed due to already partly contributing to “tumor_stage”. (Susan G. Komen®, 2024)

-   All rows with "N/A" or "" as their values for any column have been removed to ensure not data is missing.

```{r}
cancer = read.csv("METABRIC_RNA_Mutation.csv", header=TRUE)[,1:31]
cancer_new <- cancer %>% 
  drop_na(age_at_diagnosis, type_of_breast_surgery, tumor_size, tumor_stage, chemotherapy, hormone_therapy, radio_therapy, overall_survival_months) %>% 
  filter(!(age_at_diagnosis==""), !(type_of_breast_surgery==""), !(tumor_size==""), !(tumor_stage==""), !(chemotherapy==""), !(hormone_therapy==""), !(radio_therapy==""), !(overall_survival_months==""), cancer_type_detailed == "Breast Invasive Ductal Carcinoma", overall_survival == 1) %>% 
  select(age_at_diagnosis, type_of_breast_surgery, tumor_stage, chemotherapy, hormone_therapy, radio_therapy, overall_survival_months) 
cancer_new
summary(cancer_new)
```

### Exploratory data analysis

-   

```{r}
library(car)
reg_1 = lm(overall_survival_months~age_at_diagnosis*chemotherapy,data=cancer_new)  # TODO
summary(reg_1)
scatterplot(overall_survival_months~age_at_diagnosis*chemotherapy, data=cancer_new, smooth=FALSE)

reg_2 = lm(overall_survival_months~age_at_diagnosis*hormone_therapy,data=cancer_new)  # TODO
summary(reg_2)
scatterplot(overall_survival_months~age_at_diagnosis*hormone_therapy, data=cancer_new, smooth=FALSE)

reg_3 = lm(overall_survival_months~age_at_diagnosis*radio_therapy,data=cancer_new)  # TODO
summary(reg_3)
scatterplot(overall_survival_months~age_at_diagnosis*radio_therapy, data=cancer_new, smooth=FALSE)

reg_4 = lm(overall_survival_months~age_at_diagnosis*tumor_stage,data=cancer_new)  # TODO
summary(reg_4)
scatterplot(overall_survival_months~age_at_diagnosis*tumor_stage, data=cancer_new, smooth=FALSE)
```

### Model selection

-   

```{r}
fullmod = lm(overall_survival_months ~ .*.,data=cancer_new)
step(fullmod, direction = "both")
```

## Conclusion

## Appendix

-   Breast cancer gene expression profiles (METABRIC). Kaggle. (2016, May 10). <https://www.kaggle.com/datasets/raghadalharbi/breast-cancer-gene-expression-profiles-metabric>   

-   CBioPortal for Cancer Genomics. (n.d.). <https://www.cbioportal.org/study/summary?id=brca_metabric>

-   DePolo, J. (2024, October 2). Invasive ductal carcinoma (IDC). Breastcancer.org - Breast Cancer Information and Support. <https://www.breastcancer.org/types/invasive-ductal-carcinoma>  

-   Wright , P. (2023, March 21). Invasive ductal carcinoma (IDC). Johns Hopkins Medicine. <https://www.hopkinsmedicine.org/health/conditions-and-diseases/breast-cancer/invasive-ductal-carcinoma-idc#:~:text=Radiation%20therapy%20might%20be%20part,lymph%20nodes%2C%E2%80%9D%20Wright%20says>. 

-   Tumor size and staging. Susan G. Komen®. (2024, May 2). <https://www.komen.org/breast-cancer/diagnosis/stages-staging/tumor-size/#:~:text=Tumor%20size%20is%20related%20to,the%20size%20of%20the%20tumor>.
